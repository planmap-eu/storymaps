<template name="mapcontainer">
    <!-- <div class="container-fluid" style="position:relative;"> -->
        <div id="mapcontainer" style="height:80vh; width:100%; z-index:1;"></div>
        {{> storypanel }}
    <!-- </div> -->
</template>


<template name="mediacanvas">
    <!-- <pre><code> -->
    {{{setCanvas media.type media.path width}}}
    <!-- </code></pre> -->
</template>


<template name="storypanel">
    <div id="panel-wrapper" class="col-sm-8 col-sm-offset-4">
        <div class="panel panel-default">
            {{#with chapter}}
            <div class="panel-heading">
                <h3>{{ title }}</h3>
            </div>
            <div class="panel-body" style="margin:auto;overflow-y:auto">
                <!-- <p>{{ text }}</p> -->
                <!-- {{#each media}} -->
                <!-- {{> mediacanvas media=this width=400}} -->
                <!-- {{/each}} -->

                <div id="myCarousel" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators" style="bottom:-50px">
                        {{#each media}}
                        {{#unless @index}}
                        <li data-target="#myCarousel" data-slide-to="{{@index}}" class="active"></li>
                        {{else}}
                        <li data-target="#myCarousel" data-slide-to="{{@index}}"></li>
                        {{/unless}}
                        {{/each}}
                    </ol>
                    <div class="carousel-inner" style="margin-bottom:50px">
                        {{#each media}}
                        {{#unless @index}}
                        <div class="item active">
                            {{> mediacanvas media=this width=400}}
                        </div>
                        {{else}}
                        <div class="item">
                            {{> mediacanvas media=this width=400}}
                        </div>
                        {{/unless}}
                        {{/each}}
                    </div>
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

            </div>
            {{/with}}
        </div>
    </div>
    <!-- <button onclick="on()">Turn on overlay effect</button> -->
    <script>
        function on() {
            document.getElementById("mediaoverlay").style.display = "block";
        }
        function off() {
            document.getElementById("mediaoverlay").style.display = "none";
        }
    </script>
    <style>
        .carousel-indicators > li {
            margin: 0 2px;
            background-color: #f39c12;
            border-color: #f39c12;
            opacity: .7;
        }
        .carousel-indicators > li.active {
            width: 10px;
            height: 10px;
            opacity: 1;
        }
    </style>
</template>


<template name="mediacarousel">
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0"
                                          class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel"
                data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            {{#each media}}
            <div class="item">
                {{> mediacanvas media=this width=400}}
            </div>
            {{/each}}
        </div>
        <a
                 class="left
                 carousel-control"
                 href="#myCarousel"
                 data-slide="prev">
            <span
                 class="glyphicon
                 glyphicon-chevron-left"></span>
            <span
                 class="sr-only">Previous</span>
        </a>
        <a
                 class="right
                 carousel-control"
                 href="#myCarousel"
                 data-slide="next">
            <span
                 class="glyphicon
                 glyphicon-chevron-right"></span>
            <span
                 class="sr-only">Next</span>
        </a>
    </div>
</template>
