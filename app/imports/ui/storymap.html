<template name="storymap">
    <div id="storymap">
        {{> storytoc}}
        {{> map_media}}
        {{> storypanel}}
    </div>
</template>


<template name="storytoc">
    <div id="storytoc">
        storytoc
        <ul>
          {{#each episode in episodes}}
          <li>
            <img src="{{episode.thumbnail}}">
            <button id="{{@index}}">
              {{episode.title}}
            </button>
          </li>
          {{/each}}
        </ul>
    </div>
</template>


<template name="map_media">
    <div id="map_media">
        {{> mapcontainer}}
    </div>
</template>


<template name="storypanel">
    <div id="storypanel">
      {{#with episode}}
        <h3>{{title}}</h3>
        <p>{{text}}</p>
        {{#each media}}
          {{> mediacanvas media=this height=200 width=400}}
        {{/each}}
      {{/with}}
      <!-- <button onclick="on()">Turn on overlay effect</button> -->
      <script>
        function on() {
          document.getElementById("mediaoverlay").style.display = "block";
        }
        function off() {
          document.getElementById("mediaoverlay").style.display = "none";
        }
      </script>
    </div>
</template>


<template name="mediacanvas">
  {{{setCanvas media.type media.path width height}}}
</template>
