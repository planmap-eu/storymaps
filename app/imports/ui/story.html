<template name="story">

    <div id="story" class="row">
        {{> storytoc}}
        <!--
        {{> map_media}}
        {{> storypanel}}
        -->
    </div>

</template>



<template name="storytoc">

    <!--
        <div id="storytoc" class="col col-lg-2">
        storytoc
        <ul>
        {{#each episode in episodes}}
        <li>
        <img src="{{episode.thumbnail}}">
        <button id="{{@index}}">
        {{episode.title}}
        </button>
        </li>
        {{/each}}
        </ul>
        </div>
    -->
    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    Episodes
                </li>
                {{#each episode in episodes}}
                <li>
                    <img src="{{episode.thumbnail}}">
                    <a href="#{{@index}}" id="{{@index}}" class="episode">
                        {{episode.title}}
                    </a>
                </li>
                {{/each}}
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <h1>Simple Sidebar</h1>
                        <p>This template has a responsive menu toggling system. The menu will appear collapsed on smaller screens, and will appear non-collapsed on larger screens. When toggled using the button below, the menu will appear/disappear. On small screens, the page content will be pushed off canvas.</p>
                        <p>Make sure to keep all page content within the <code>#page-content-wrapper</code>.</p>
                        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle Menu</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->
    <!-- Menu Toggle Script -->
    <script>
        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
    </script>

    <style>
        #wrapper {
            padding-left: 0;
            -webkit-transition: all 0.5s ease;
            -moz-transition: all 0.5s ease;
            -o-transition: all 0.5s ease;
            transition: all 0.5s ease;
        }
        
        #wrapper.toggled {
            padding-left: 250px;
        }
        
        #sidebar-wrapper {
            z-index: 1000;
            position: fixed;
            left: 250px;
            width: 0;
            height: 100%;
            margin-left: -250px;
            overflow-y: auto;
            background: #000;
            -webkit-transition: all 0.5s ease;
            -moz-transition: all 0.5s ease;
            -o-transition: all 0.5s ease;
            transition: all 0.5s ease;
        }
        
        #wrapper.toggled #sidebar-wrapper {
            width: 250px;
        }
        
        #page-content-wrapper {
            width: 100%;
            position: absolute;
            padding: 15px;
        }
        
        #wrapper.toggled #page-content-wrapper {
            position: absolute;
            margin-right: -250px;
        }
        
        /* Sidebar Styles */
        
        .sidebar-nav {
            position: absolute;
            top: 0;
            width: 250px;
            margin: 0;
            padding: 0;
            list-style: none;
        }
        
        .sidebar-nav li {
            text-indent: 20px;
            line-height: 40px;
        }
        
        .sidebar-nav li a {
            display: block;
            text-decoration: none;
            color: #999999;
        }
        
        .sidebar-nav li a:hover {
            text-decoration: none;
            color: #fff;
            background: rgba(255,255,255,0.2);
        }
        
        .sidebar-nav li a:active,
        .sidebar-nav li a:focus {
            text-decoration: none;
        }
        
        .sidebar-nav > .sidebar-brand {
            height: 65px;
            font-size: 18px;
            line-height: 60px;
        }
        
        .sidebar-nav > .sidebar-brand a {
            color: #999999;
        }
        
        .sidebar-nav > .sidebar-brand a:hover {
            color: #fff;
            background: none;
        }
        
        @media(min-width:768px) {
            #wrapper {
                padding-left: 250px;
            }

            #wrapper.toggled {
                padding-left: 0;
            }

            #sidebar-wrapper {
                width: 250px;
            }

            #wrapper.toggled #sidebar-wrapper {
                width: 0;
            }

            #page-content-wrapper {
                padding: 20px;
                position: relative;
            }

            #wrapper.toggled #page-content-wrapper {
                position: relative;
                margin-right: 0;
            }
        }
    </style>

</template>



<template name="map_media">

    <div id="map_media">
        {{> mapcontainer}}
    </div>

</template>



<template name="storypanel">
    <div id="storypanel">
      {{#with episode}}
        <h3>{{title}}</h3>
        <p>{{text}}</p>
        {{#each media}}
          {{> mediacanvas media=this height=200 width=400}}
        {{/each}}
      {{/with}}
      <!-- <button onclick="on()">Turn on overlay effect</button> -->
      <script>
        function on() {
          document.getElementById("mediaoverlay").style.display = "block";
        }
        function off() {
          document.getElementById("mediaoverlay").style.display = "none";
        }
      </script>
    </div>
</template>


<template name="mediacanvas">
  {{{setCanvas media.type media.path width height}}}
</template>


<!-- <template name="top_menu_bar">

    <div class="navbar navbar-fixed-top navbarmap" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <div class="navbar-icon-container">
            <a href="#" class="navbar-icon pull-right visible-xs" id="nav-btn">
              <i class="fa fa-bars fa-lg"></i>
            </a>
            <a href="#" class="navbar-icon pull-right visible-xs" id="sidebar-toggle-btn">
              <i class="fa fa-search fa-lg"></i>
            </a>
          </div>
          <a class="navbar-brand" href="#" style="padding-top: 5px">
            <img src="assets/img/planmap_logo_white.png" style="width: 160px">
          </a>
        </div>
        <div class="navbar-collapse collapse">
          <form class="navbar-form navbar-right" role="search" style="display: none">
            <div class="form-group has-feedback">
              <input id="searchbox" type="text" placeholder="Search" class="form-control">
              <span id="searchicon" class="fa fa-search form-control-feedback"></span>
            </div>
          </form>
          <ul class="nav navbar-nav">
            <li class="hidden-xs">
              <a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="list-btn" class="green">
                <i class="fa fa-list"></i>
                Chapters
              </a>
            </li>
            <li>
              <a href="/" class="green">
                <i class="fa fa-home"></i>
                Stories Home
              </a>
            </li>
            <li>
              <a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="about-btn" class="green">
                <i class="fa fa-question-circle"></i>
                About
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

</template> -->


<!-- <template name="main_story_container">

    <div id="container">

      <div id="sidebar">
        <div class="sidebar-wrapper">

          <div class="panel panel-default" id="features">
            <div class="panel-heading">
              <h3 class="panel-title">
                Chapters
                <button type="button" class="btn btn-xs btn-default pull-right chevron" id="sidebar-hide-btn">
                  <i class="fa fa-chevron-left"></i>
                </button>
              </h3>
            </div>

            <div class="panel-body"></div>

            <div class="sidebar-table">
              <table class="table table-hover" id="feature-list">
                <thead class="hidden">
                  <tr>
                    <th>Icon</th>
                  </tr>
                  <tr>
                    <th>Name</th>
                  </tr>
                  <tr>
                    <th>Chevron</th>
                  </tr>
                </thead>
                <tbody class="list" id="chapters">
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </div>

      <div id="map"></div>

      <div id="rightsidebar" style="display: none;">
        <div class="sidebar-wrapper">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">
                <span id="storytitle">
                  Story content
                </span>
                <div class="btn-group pull-right" role="group" aria-label="navigation buttons">
                  <button type="button" id="prev_story" class="btn btn-xs btn-default chevron" disabled>
                    <i class="fa fa-chevron-left"></i>
                  </button>
                  <button type="button" id="next_story" class="btn btn-xs btn-default chevron">
                    <i class="fa fa-chevron-right"></i>
                  </button>
                </div>
              </h3>
            </div>

            <div class="panel-body storybox">
              <div class="storycontent"></div>
              <br><br>
              <div id="media" class="owl-carousel owl-theme"></div>
            </div>

          </div>
        </div>
      </div>

    </div>

    <div id="loading" style="display: none">
      <div class="loading-indicator">
        <div class="progress progress-striped active">
          <div class="progress-bar progress-bar-info progress-bar-full"></div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">
              &times;
            </button>
            <h4 class="modal-title">About Storymap</h4>
          </div>
          <div class="modal-body">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent mollis elementum magna, vel commodo neque tincidunt at. Vestibulum euismod rhoncus malesuada. Vivamus mollis pretium pretium. Aliquam sodales facilisis nisi, et rhoncus dui.
            Etiam eget massa mollis, tempus mi non, semper purus. Donec sit amet pulvinar enim. Fusce volutpat blandit purus, lacinia iaculis dolor eleifend et. Cras consequat dignissim velit eget imperdiet. Aenean tincidunt quam sapien. Curabitur
            eget ullamcorper arcu. Vivamus at arcu sed nisl aliquam tincidunt. Proin in fringilla quam.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="featureModal" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">
              &times;
            </button>
            <h4 class="modal-title text-primary" id="feature-title"></h4>
          </div>
          <div class="modal-body" id="feature-info"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="attributionModal" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">
              &times;
            </button>
            <h4 class="modal-title">
              attribution...
            </h4>
          </div>
          <div class="modal-body">
            <div id="attribution"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="imageModal" class="modal" tabindex='-1'>
      <span class="closemodal">
        &times;
      </span>
      <img class="modal-content" id="bigimg">
      <div id="caption"></div>
    </div>

</template> -->
